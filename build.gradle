buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.0-M1'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.0.3"
        classpath "io.ratpack:ratpack-gradle:1.3.3"
    }
}

plugins {
    id 'java'
}

allprojects {
    allprojects {
        gradle.projectsEvaluated {
            tasks.withType(JavaCompile) {
                options.compilerArgs << "-Xlint:unchecked" << "-Xlint:deprecation"
            }
        }
    }
}

ext.junitPlatformVersion = '1.0.0-M1'
ext.junitJupiterVersion = '5.0.0-M1'

subprojects {
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'

    apply plugin: "java"
    apply plugin: "kotlin"

    repositories {
        mavenCentral()
        maven {
            url "https://oss.sonatype.org/content/repositories/snapshots/"
        }
        maven {
            url "http://dl.bintray.com/kotlin/exposed"
        }
        maven {
            url "http://repository.jetbrains.com/all"
        }
    }

    dependencies {
        compile group: 'io.reactivex', name: 'rxjava', version: '1.1.5'
        compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.21'
        compile group: 'org.slf4j', name: 'slf4j-log4j12', version: '1.7.21'

        compile group: 'org.jetbrains.kotlin', name: 'kotlin-gradle-plugin', version: '1.0.3'

        testCompile 'org.jetbrains.spek:spek:1.0.25'
        testCompile "org.junit.jupiter:junit-jupiter-api:${junitJupiterVersion}"
        testRuntime "org.junit.jupiter:junit-jupiter-engine:${junitJupiterVersion}"
    }

    apply plugin: 'org.junit.platform.gradle.plugin'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.8'
}
